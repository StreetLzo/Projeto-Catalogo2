<!-- templates/base.html -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CatÃ¡logo de Projetos</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Ãcones e fontes -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body style="font-family: 'Inter', sans-serif;">

  <!-- NAVBAR -->
  <nav class="navbar navbar-dark bg-primary shadow-sm py-2">
    <div class="container d-flex justify-content-between align-items-center">

      <a class="navbar-brand fw-bold text-white" href="{{ url_for('index') }}">
        <i class="bi bi-journal-text me-2"></i> CatÃ¡logo
      </a>

      
      <!-- BotÃ£o Hamburguer estilizado -->
<button class="menu-btn d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
  <i class="bi bi-list"></i>
</button>


      <!-- Menu desktop -->
      <ul class="navbar-nav d-none d-lg-flex flex-row gap-3">
        {% if current_user.is_authenticated %}
          <li class="nav-item"><a class="nav-link text-white fw-semibold" href="{{ url_for('favoritos') }}">â­ Favoritos</a></li>
          <li class="nav-item"><a class="nav-link text-white fw-semibold" href="{{ url_for('meus_projetos') }}">ğŸ“‚ Meus Projetos</a></li>
          <li class="nav-item"><a class="nav-link text-white fw-semibold" href="{{ url_for('perfil') }}">ğŸ‘¤ Perfil</a></li>
          {% if current_user.is_admin %}
            <li class="nav-item"><a class="nav-link text-warning fw-semibold" href="{{ url_for('admin_dashboard') }}">âš™ï¸ Admin</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link text-white fw-semibold" href="{{ url_for('logout') }}">ğŸšª Sair</a></li>
        {% else %}
          <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('login') }}">ğŸ” Entrar</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('register') }}">ğŸ“ Cadastrar</a></li>
        {% endif %}
      </ul>
    </div>
  </nav>

  <!-- SIDEBAR BONITA -->
  <div class="offcanvas offcanvas-start text-white" tabindex="-1" id="sidebarMenu">
    <div class="offcanvas-header border-bottom border-light">
      <h5 class="offcanvas-title fw-bold">Menu</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
    </div>

    <div class="offcanvas-body px-4">
      {% if current_user.is_authenticated %}
        <div class="text-center mb-4">
          {% if current_user.foto_perfil %}
            <img src="{{ url_for('uploads', filename=current_user.foto_perfil) }}" class="rounded-circle shadow" width="80" height="80">
          {% else %}
            <i class="bi bi-person-circle fs-1"></i>
          {% endif %}
          <p class="mt-2 fw-semibold">{{ current_user.name }}</p>
        </div>
      {% endif %}

      <ul class="nav flex-column gap-2">
        <li><a href="{{ url_for('index') }}" class="nav-link text-white"><i class="bi bi-house-door me-2"></i> InÃ­cio</a></li>

        {% if current_user.is_authenticated %}
          <li><a href="{{ url_for('meus_projetos') }}" class="nav-link text-white"><i class="bi bi-folder2-open me-2"></i> Meus Projetos</a></li>
          <li><a href="{{ url_for('favoritos') }}" class="nav-link text-white"><i class="bi bi-star me-2"></i> Favoritos</a></li>
          <li><a href="{{ url_for('perfil') }}" class="nav-link text-white"><i class="bi bi-person me-2"></i> Perfil</a></li>
          <li><a href="{{ url_for('create_project') }}" class="nav-link text-white"><i class="bi bi-plus-circle me-2"></i> Novo Projeto</a></li>
          {% if current_user.is_admin %}
            <li><a href="{{ url_for('admin_dashboard') }}" class="nav-link text-warning"><i class="bi bi-gear me-2"></i> Painel Admin</a></li>
          {% endif %}
          <li><a href="{{ url_for('logout') }}" class="nav-link text-white"><i class="bi bi-box-arrow-right me-2"></i> Sair</a></li>
        {% else %}
          <li><a href="{{ url_for('login') }}" class="nav-link text-white"><i class="bi bi-box-arrow-in-right me-2"></i> Entrar</a></li>
          <li><a href="{{ url_for('register') }}" class="nav-link text-white"><i class="bi bi-pencil-square me-2"></i> Cadastrar</a></li>
        {% endif %}
      </ul>
    </div>
  </div>

  <!-- CONTEÃšDO PRINCIPAL -->
  <div class="container my-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
